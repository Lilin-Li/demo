1. 安裝 docker 倉庫
2. 安裝 kind，並啟動k8s集群: kind create cluster --config .k8s/kind.yaml
3. 安裝 Helm，並配置 values.yaml

```yaml
replicaCount: 2

image:
  repository: demo
  tag: "latest"
  pullPolicy: IfNotPresent
imagePullSecrets: []

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  name: ""
  annotations: {}
  automount: true

podAnnotations: {}
podLabels: {}

podSecurityContext: {}
securityContext: {}

service:
  type: ClusterIP
  port: 8080       # 你的容器對外服務埠

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: demo.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

resources: {}      # 可改為 requests/limits

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 60
  # targetMemoryUtilizationPercentage: 80  # 若 HPA 模板有用到記憶體

container:
  port: 8080
  env: []          # 例如 [{ name: JAVA_OPTS, value: "-Xms256m -Xmx512m" }]

nodeSelector: {}
tolerations: []
affinity: {}

httpRoute:
  enabled: false
  host: demo.local
  parentRef:
    kind: Gateway
    name: my-gateway
    namespace: default
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /
      backendRefs:
        - name: demo
          port: 8080


```
   安裝 Chart: helm upgrade --install demo k8s/helm
4. 應用 hpa.yaml:
    kubectl apply -f k8s/hpa.yaml
   驗證:
     kubectl get hpa demo-hpa
     kubectl describe hpa demo-hpa

5. 建置 ingress
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml
kubectl wait --namespace ingress-nginx --for=condition=Ready pods -l app.kubernetes.io/component=controller --timeout=120s
建立ingress.yaml
```
apiVersion: networking.k8s.io/v1
    kind: Ingress
    metadata:
      name: demo
    spec:
      ingressClassName: nginx       # 指定使用 NGINX Controller
      rules:
      - host: demo.local            # 綁定一個域名
        http:
          paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: demo          # 對應剛剛 Helm 建的 Service
                port:
                  number: 80
```
kubectl apply -f ingress.yaml



6. hosts檔加入
    127.0.0.1 demo.local

7. 鏡像載入 kind k8s : kind load docker-image demo:latest --name mycluster
8. kubectl port-forward deployment/demo-helm 8081:8080 
或著 kubectl --namespace ingress-nginx port-forward deploy/ingress-nginx-controller 8081:80
9. 測試 curl http://127.0.0.1:8081  
